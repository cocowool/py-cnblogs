
<!DOCTYPE html>
<html lang="zh-cn">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="referrer" content="origin" />
<title>Linux下数据备份的一般方法 - Cocowool - 博客园</title>
<meta property="og:description" content="备份对于任何应用来说都是一个非常重要，并且应当引起足够重视的事情，就算我们平时使用电脑的过程中也要注意，本文就讨论了Linux下进行备份的几种常用的方法，更多的方法，还需要大家来踊跃献计献策。" />
<link type="text/css" rel="stylesheet" href="/bundles/blog-common.css?v=-duj5vpGTntb85GJoM3iRI972XwWcI-j8zmqDzyfu2w1"/>
<link type="text/css" rel="stylesheet" href="/blog/customcss/43046.css?v=jIe%2bqkoe6NGEDBHSKfZFtSP%2bk3Q%3d"/>
<link id="mobile-style" media="only screen and (max-width: 767px)" type="text/css" rel="stylesheet" href="/skins/Custom/bundle-Custom-mobile.css?v=D4ZG96to-4HBTPc_nukUGx4UJPJRCpcXUrj8NiiyXiU1"/>
<link title="RSS" type="application/rss+xml" rel="alternate" href="https://www.cnblogs.com/cocowool/rss"/>
<link title="RSD" type="application/rsd+xml" rel="EditURI" href="https://www.cnblogs.com/cocowool/rsd.xml"/>
<link type="application/wlwmanifest+xml" rel="wlwmanifest" href="https://www.cnblogs.com/cocowool/wlwmanifest.xml"/>
<script src="//common.cnblogs.com/scripts/jquery-2.2.0.min.js"></script>
<script type="text/javascript">var currentBlogApp = 'cocowool', cb_enable_mathjax=false;var isLogined=false;</script>
<script src="/bundles/blog-common.js?v=oVrWjmbP-rXxVp7O71kev8vWEZCetdwYaIziKHJCYc41" type="text/javascript"></script>
</head>
<body>
<a name="top"></a>
<!--PageBeginHtml Block Begin-->
<div id="bgoverlay"></div>
<!--PageBeginHtml Block End-->

<!--done-->
<div id="home">
<div id="header">
	<div id="blogTitle">
	<a id="lnkBlogLogo" href="https://www.cnblogs.com/cocowool/"><img id="blogLogo" src="/Skins/custom/images/logo.gif" alt="返回主页" /></a>			
		
<!--done-->
<h1><a id="Header1_HeaderTitle" class="headermaintitle" href="https://www.cnblogs.com/cocowool/">小狼的世界</a></h1>
<h2>不积跬步，无以至千里、不积细流，无以成江海</h2>



		
	</div><!--end: blogTitle 博客的标题和副标题 -->
	<div id="navigator">
		
<ul id="navList">
<li><a id="blog_nav_sitehome" class="menu" href="https://www.cnblogs.com/">博客园</a></li>
<li><a id="blog_nav_myhome" class="menu" href="https://www.cnblogs.com/cocowool/">首页</a></li>
<li></li>
<li><a id="blog_nav_contact" class="menu" rel="nofollow" href="https://msg.cnblogs.com/send/Cocowool">联系</a></li>
<li><a id="blog_nav_rss" class="menu" href="https://www.cnblogs.com/cocowool/rss">订阅</a>
<!--<a id="blog_nav_rss_image" class="aHeaderXML" href="https://www.cnblogs.com/cocowool/rss"><img src="//www.cnblogs.com/images/xml.gif" alt="订阅" /></a>--></li>
<li><a id="blog_nav_admin" class="menu" rel="nofollow" href="https://i.cnblogs.com/">管理</a></li>
</ul>
		<div class="blogStats">
			
			<div id="blog_stats">
<span id="stats_post_count">随笔 - 363&nbsp; </span>
<span id="stats_article_count">文章 - 4&nbsp; </span>
<span id="stats-comment_count">评论 - 449</span>
</div>
			
		</div><!--end: blogStats -->
	</div><!--end: navigator 博客导航栏 -->
</div><!--end: header 头部 -->

<div id="main">
	<div id="mainContent">
	<div class="forFlow">
		
<div id="post_detail">
<!--done-->
<div id="topics">
	<div class = "post">
		<h1 class = "postTitle">
			<a id="cb_post_title_url" class="postTitle2" href="https://www.cnblogs.com/cocowool/archive/2009/10/29/1592355.html">Linux下数据备份的一般方法</a>
		</h1>
		<div class="clear"></div>
		<div class="postBody">
			<div id="cnblogs_post_body" class="blogpost-body">一个应用中有很多的重要数据，为了在数据灾难发生后我们能够及时、迅速、准确的恢复我们的应用到一个比较合适的位置，我们必须定期的对我们的数据资料进行备份，今天所要讨论的就是Linux下数据资料备份的方法。<br /><br />1、本机数据手工备份<br />&nbsp;&nbsp; &nbsp;Linux上有功能强大的tar命令，tar最初是为了制作磁带备份而设计的，他的作用是把文件和目录备份到磁带中，然后从磁带中提取或恢复文件。现在我们可以使用tar来备份数据到任何存储介质上。<br />&nbsp;&nbsp; &nbsp;tar命令备份数据的格式如下：<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;tar cvf backup.tar /home/www&nbsp;&nbsp; &nbsp;这个命令的含义就是将 /home/www/ 打包为 backup.tar 文件，如果我们需要压缩，则需要加上 z 命令。<br />&nbsp;&nbsp; &nbsp;使用这个命令，我们可以手工备份服务器上的数据，但是要做到定时自动备份，我们还需要借助下一个技巧。<br /><br />2、本机数据自动备份<br />&nbsp;&nbsp; &nbsp;要实现自动备份，我们首先需要将 tar 命令写在脚本里。比如下面这样一个脚本：<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;#!/bin/sh<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;tar zcvf test.tar /home/www/<br />&nbsp;&nbsp; &nbsp;保存为 test.sh 并添加可执行权限，执行后，发现提示：tar: Removing leading `/' from member names<br />&nbsp;&nbsp; &nbsp;这个问题是由于脚本执行的时候默认是在用户目录下的。这样就选成了问题的存在,解决办法就是在执行 tar 之前 cd 切换到要打包的目录就可以了。<br />&nbsp;&nbsp; &nbsp;<br />&nbsp;&nbsp; &nbsp;有了可以执行命令的脚本，还要能够让他定时执行，这个就要借助于计划任务了。<br />&nbsp;&nbsp; &nbsp;<br />&nbsp;&nbsp; &nbsp;Linux 为我们提供了 cron 这个强大的工具，我们可以用它来实现几乎任何类型的定时触发。每个用户都有自己的 cron 配置文件，一般来说，我们都是通过 root 用户来运行 cron 任务，以保证我们能够获得足够的权限。<br />&nbsp;&nbsp; &nbsp;如果我们希望每天凌晨四点定时运行我们之前写好的脚本，我们可以通过 crontab -e 来编辑配置文件，并加入：<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;0 4 * * * /home/test.sh<br />&nbsp;&nbsp; &nbsp;这样，每天凌晨4点系统会自动运行这个备份脚本。<br /><p>&nbsp;&nbsp;&nbsp; 下面是一个自动备份的脚本的例子：</p><div class="cnblogs_code"><!--<br /><br />Code highlighting produced by Actipro CodeHighlighter (freeware)<br />http://www.CodeHighlighter.com/<br /><br />--><span style="color: #008000;">#</span><span style="color: #008000;">!/bin/sh<br /><br />#&nbsp;aim&nbsp;to&nbsp;backup&nbsp;the&nbsp;resorces&nbsp;files&nbsp;and&nbsp;mysql&nbsp;data&nbsp;that&nbsp;used&nbsp;by&nbsp;shenti&nbsp;system<br />#&nbsp;crontab&nbsp;run&nbsp;at&nbsp;4:00AM&nbsp;every&nbsp;day<br />#&nbsp;procedure:&nbsp;first&nbsp;backup&nbsp;all&nbsp;the&nbsp;data,&nbsp;then&nbsp;check&nbsp;if&nbsp;3&nbsp;days&nbsp;ago&nbsp;backup&nbsp;files&nbsp;exist,&nbsp;then&nbsp;delete&nbsp;prior<br />#&nbsp;created&nbsp;by&nbsp;shiqiang&nbsp;at&nbsp;2009-10-28</span><span style="color: #008000;"><br /></span><span style="color: #000000;"><br />BACKDIR</span><span style="color: #000000;">=</span><span style="color: #000000; font-weight: bold;">"</span><span style="color: #000000; font-weight: bold;">/home/backup/</span><span style="color: #000000; font-weight: bold;">"</span><span style="color: #000000;"><br />LOGFILE</span><span style="color: #000000;">=</span><span style="color: #000000; font-weight: bold;">"</span><span style="color: #000000; font-weight: bold;">/home/backup/shenti_backup_log</span><span style="color: #000000; font-weight: bold;">"</span><span style="color: #000000;"><br />MYSQLBIN</span><span style="color: #000000;">=</span><span style="color: #000000; font-weight: bold;">"</span><span style="color: #000000; font-weight: bold;">/etc/init.d/mysql</span><span style="color: #000000; font-weight: bold;">"</span><span style="color: #000000;"><br /><br />RESOURCEPATH</span><span style="color: #000000;">=</span><span style="color: #000000; font-weight: bold;">"</span><span style="color: #000000; font-weight: bold;">/home/</span><span style="color: #000000; font-weight: bold;">"</span><span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #008000;">#</span><span style="color: #008000;">&nbsp;add&nbsp;the&nbsp;path&nbsp;var&nbsp;to&nbsp;avoid&nbsp;the&nbsp;'Removing&nbsp;leading&nbsp;/&nbsp;from&nbsp;member&nbsp;names&nbsp;tips'</span><span style="color: #008000;"><br /></span><span style="color: #000000;">RESOURCEDIR</span><span style="color: #000000;">=</span><span style="color: #000000; font-weight: bold;">"</span><span style="color: #000000; font-weight: bold;">www/</span><span style="color: #000000; font-weight: bold;">"</span><span style="color: #000000;"><br /><br />MYSQLDATAPATH</span><span style="color: #000000;">=</span><span style="color: #000000; font-weight: bold;">"</span><span style="color: #000000; font-weight: bold;">/var/lib/mysql/</span><span style="color: #000000; font-weight: bold;">"</span><span style="color: #000000;"><br />MYSQLDATADIR_1</span><span style="color: #000000;">=</span><span style="color: #000000; font-weight: bold;">"</span><span style="color: #000000; font-weight: bold;">wys/</span><span style="color: #000000; font-weight: bold;">"</span><span style="color: #000000;"><br />MYSQLDATADIR_2</span><span style="color: #000000;">=</span><span style="color: #000000; font-weight: bold;">"</span><span style="color: #000000; font-weight: bold;">wys2/</span><span style="color: #000000; font-weight: bold;">"</span><span style="color: #000000;"><br /><br /></span><span style="color: #008000;">#</span><span style="color: #008000;">&nbsp;cd&nbsp;$BACKDIR</span><span style="color: #008000;"><br /></span><span style="color: #000000;"><br />YEAR</span><span style="color: #000000;">=</span><span style="color: #000000;">`date&nbsp;</span><span style="color: #000000;">+</span><span style="color: #800080;">%Y</span><span style="color: #000000;">`<br />MONTH</span><span style="color: #000000;">=</span><span style="color: #000000;">`date&nbsp;</span><span style="color: #000000;">+</span><span style="color: #800080;">%m</span><span style="color: #000000;">`<br />DAY</span><span style="color: #000000;">=</span><span style="color: #000000;">`date&nbsp;</span><span style="color: #000000;">+</span><span style="color: #800080;">%d</span><span style="color: #000000;">`<br /><br />echo&nbsp;</span><span style="color: #000000; font-weight: bold;">"</span><span style="color: #000000; font-weight: bold;">-----------------------------------</span><span style="color: #000000; font-weight: bold;">"</span><span style="color: #000000;">&nbsp;</span><span style="color: #000000;">&gt;&gt;</span><span style="color: #000000;">&nbsp;</span><span style="color: #800080;">$LOGFILE</span><span style="color: #000000;"><br />echo&nbsp;$(date&nbsp;</span><span style="color: #000000;">+</span><span style="color: #000000; font-weight: bold;">"</span><span style="color: #000000; font-weight: bold;">%Y-%m-%d&nbsp;%H:%M:%S</span><span style="color: #000000; font-weight: bold;">"</span><span style="color: #000000;">)</span><span style="color: #000000; font-weight: bold;">"</span><span style="color: #000000; font-weight: bold;">&nbsp;Shenti&nbsp;backup&nbsp;begin</span><span style="color: #000000; font-weight: bold;">"</span><span style="color: #000000;">&nbsp;</span><span style="color: #000000;">&gt;&gt;</span><span style="color: #000000;">&nbsp;</span><span style="color: #800080;">$LOGFILE</span><span style="color: #000000;"><br /><br />DIRNAME</span><span style="color: #000000;">=</span><span style="color: #800080;">$BACKDIR$YEAR</span><span style="color: #000000;">-</span><span style="color: #800080;">$MONTH</span><span style="color: #000000;">-</span><span style="color: #800080;">$DAY</span><span style="color: #000000;"><br />FILENAME</span><span style="color: #000000;">=</span><span style="color: #800080;">$DIRNAME</span><span style="color: #000000;">/</span><span style="color: #800080;">$YEAR</span><span style="color: #000000;">-</span><span style="color: #800080;">$MONTH</span><span style="color: #000000;">-</span><span style="color: #800080;">$DAY</span><span style="color: #000000;">-</span><span style="color: #000000;">shenti</span><span style="color: #000000;">-</span><span style="color: #000000;">resorces</span><span style="color: #000000;">-</span><span style="color: #000000;">backup</span><span style="color: #000000;">.</span><span style="color: #000000;">tar<br /><br /></span><span style="color: #008000;">#</span><span style="color: #008000;">&nbsp;change&nbsp;dir&nbsp;to&nbsp;correspond&nbsp;folder</span><span style="color: #008000;"><br /></span><span style="color: #0000ff;">if</span><span style="color: #000000;">&nbsp;[&nbsp;</span><span style="color: #000000;">!</span><span style="color: #000000;">&nbsp;</span><span style="color: #000000;">-</span><span style="color: #000000;">d&nbsp;</span><span style="color: #800080;">$DIRNAME</span><span style="color: #000000;">&nbsp;]<br />then<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">mkdir</span><span style="color: #000000;">&nbsp;</span><span style="color: #800080;">$DIRNAME</span><span style="color: #000000;"><br />fi<br /><br /></span><span style="color: #008000;">#</span><span style="color: #008000;">&nbsp;backup&nbsp;the&nbsp;resources&nbsp;folder</span><span style="color: #008000;"><br /></span><span style="color: #000000;">cd&nbsp;</span><span style="color: #800080;">$RESOURCEPATH</span><span style="color: #000000;"><br />tar&nbsp;zcvf&nbsp;</span><span style="color: #800080;">$FILENAME</span><span style="color: #000000;">&nbsp;</span><span style="color: #800080;">$RESOURCEDIR</span><span style="color: #000000;">&nbsp;</span><span style="color: #000000;">&gt;&gt;</span><span style="color: #000000;">&nbsp;</span><span style="color: #800080;">$LOGFILE</span><span style="color: #000000;">&nbsp;</span><span style="color: #800000;">2</span><span style="color: #000000;">&gt;&amp;</span><span style="color: #800000;">1</span><span style="color: #000000;"><br /><br /></span><span style="color: #008000;">#</span><span style="color: #008000;">&nbsp;backup&nbsp;the&nbsp;mysql&nbsp;data&nbsp;folder,&nbsp;we&nbsp;should&nbsp;be&nbsp;attion&nbsp;about&nbsp;the&nbsp;data&nbsp;consistency</span><span style="color: #008000;"><br /></span><span style="color: #000000;"><br /></span><span style="color: #800080;">$MYSQLBIN</span><span style="color: #000000;">&nbsp;stop&nbsp;</span><span style="color: #000000;">&gt;&gt;</span><span style="color: #000000;">&nbsp;</span><span style="color: #800080;">$LOGFILE</span><span style="color: #000000;">&nbsp;</span><span style="color: #800000;">2</span><span style="color: #000000;">&gt;&amp;</span><span style="color: #800000;">1</span><span style="color: #000000;"><br /><br />cd&nbsp;</span><span style="color: #800080;">$MYSQLDATAPATH</span><span style="color: #000000;"><br />FILENAME</span><span style="color: #000000;">=</span><span style="color: #800080;">$DIRNAME</span><span style="color: #000000;">/</span><span style="color: #800080;">$YEAR</span><span style="color: #000000;">-</span><span style="color: #800080;">$MONTH</span><span style="color: #000000;">-</span><span style="color: #800080;">$DAY</span><span style="color: #000000;">-</span><span style="color: #000000;">mysqldata</span><span style="color: #000000;">-</span><span style="color: #000000;">wys</span><span style="color: #000000;">-</span><span style="color: #000000;">backup</span><span style="color: #000000;">.</span><span style="color: #000000;">tar<br />tar&nbsp;zcvf&nbsp;</span><span style="color: #800080;">$FILENAME</span><span style="color: #000000;">&nbsp;</span><span style="color: #800080;">$MYSQLDATADIR_1</span><span style="color: #000000;">&nbsp;</span><span style="color: #000000;">&gt;&gt;</span><span style="color: #000000;">&nbsp;</span><span style="color: #800080;">$LOGFILE</span><span style="color: #000000;">&nbsp;</span><span style="color: #800000;">2</span><span style="color: #000000;">&gt;&amp;</span><span style="color: #800000;">1</span><span style="color: #000000;"><br /><br />FILENAME</span><span style="color: #000000;">=</span><span style="color: #800080;">$DIRNAME</span><span style="color: #000000;">/</span><span style="color: #800080;">$YEAR</span><span style="color: #000000;">-</span><span style="color: #800080;">$MONTH</span><span style="color: #000000;">-</span><span style="color: #800080;">$DAY</span><span style="color: #000000;">-</span><span style="color: #000000;">mysqldata</span><span style="color: #000000;">-</span><span style="color: #000000;">wys2</span><span style="color: #000000;">-</span><span style="color: #000000;">backup</span><span style="color: #000000;">.</span><span style="color: #000000;">tar<br />tar&nbsp;zcvf&nbsp;</span><span style="color: #800080;">$FILENAME</span><span style="color: #000000;">&nbsp;</span><span style="color: #800080;">$MYSQLDATADIR_2</span><span style="color: #000000;">&nbsp;</span><span style="color: #000000;">&gt;&gt;</span><span style="color: #000000;">&nbsp;</span><span style="color: #800080;">$LOGFILE</span><span style="color: #000000;">&nbsp;</span><span style="color: #800000;">2</span><span style="color: #000000;">&gt;&amp;</span><span style="color: #800000;">1</span><span style="color: #000000;"><br /><br /></span><span style="color: #800080;">$MYSQLBIN</span><span style="color: #000000;">&nbsp;start&nbsp;</span><span style="color: #000000;">&gt;&gt;</span><span style="color: #000000;">&nbsp;</span><span style="color: #800080;">$LOGFILE</span><span style="color: #000000;">&nbsp;</span><span style="color: #800000;">2</span><span style="color: #000000;">&gt;&amp;</span><span style="color: #800000;">1</span><span style="color: #000000;"><br /><br />echo&nbsp;</span><span style="color: #000000; font-weight: bold;">"</span><span style="color: #000000; font-weight: bold;">Resources&nbsp;and&nbsp;mysql&nbsp;data&nbsp;backup&nbsp;finished&nbsp;at</span><span style="color: #000000; font-weight: bold;">"</span><span style="color: #000000;">$(date&nbsp;</span><span style="color: #000000;">+</span><span style="color: #000000; font-weight: bold;">"</span><span style="color: #000000; font-weight: bold;">%Y-%m-%d&nbsp;%H:%M:%S</span><span style="color: #000000; font-weight: bold;">"</span><span style="color: #000000;">)&nbsp;</span><span style="color: #000000;">&gt;&gt;</span><span style="color: #000000;">&nbsp;</span><span style="color: #800080;">$LOGFILE</span><span style="color: #000000;"><br /><br /></span><span style="color: #008000;">#</span><span style="color: #008000;">&nbsp;check&nbsp;the&nbsp;old&nbsp;backup&nbsp;folder</span><span style="color: #008000;"><br /></span><span style="color: #000000;">OLDBACKDIR</span><span style="color: #000000;">=</span><span style="color: #000000; font-weight: bold;">"</span><span style="color: #000000; font-weight: bold;">$BACKDIR</span><span style="color: #000000; font-weight: bold;">"</span><span style="color: #000000;">$(date&nbsp;</span><span style="color: #000000;">+</span><span style="color: #800080;">%Y</span><span style="color: #000000;">-</span><span style="color: #800080;">%m</span><span style="color: #000000;">-</span><span style="color: #800080;">%d</span><span style="color: #000000;">&nbsp;</span><span style="color: #000000;">--</span><span style="color: #000000;">date</span><span style="color: #000000;">=</span><span style="color: #000000; font-weight: bold;">'</span><span style="color: #000000; font-weight: bold;">3&nbsp;days&nbsp;ago</span><span style="color: #000000; font-weight: bold;">'</span><span style="color: #000000;">)<br /><br /></span><span style="color: #0000ff;">if</span><span style="color: #000000;">&nbsp;[&nbsp;</span><span style="color: #000000;">-</span><span style="color: #000000;">d&nbsp;</span><span style="color: #800080;">$OLDBACKDIR</span><span style="color: #000000;">&nbsp;]<br />then<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`rm&nbsp;</span><span style="color: #000000;">-</span><span style="color: #000000;">rf&nbsp;</span><span style="color: #800080;">$OLDBACKDIR</span><span style="color: #000000;">`&nbsp;</span><span style="color: #000000;">&gt;&gt;</span><span style="color: #000000;">&nbsp;</span><span style="color: #800080;">$LOGFILE</span><span style="color: #000000;">&nbsp;</span><span style="color: #800000;">2</span><span style="color: #000000;">&gt;&amp;</span><span style="color: #800000;">1</span><span style="color: #000000;"><br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #000000; font-weight: bold;">"</span><span style="color: #000000; font-weight: bold;">&nbsp;[$OLDBACKDIR]&nbsp;Delete&nbsp;Old&nbsp;Backup&nbsp;Folder&nbsp;Success!</span><span style="color: #000000; font-weight: bold;">"</span><span style="color: #000000;">&nbsp;</span><span style="color: #000000;">&gt;&gt;</span><span style="color: #000000;">&nbsp;</span><span style="color: #800080;">$LOGFILE</span><span style="color: #000000;"><br /></span><span style="color: #0000ff;">else</span><span style="color: #000000;"><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #000000; font-weight: bold;">"</span><span style="color: #000000; font-weight: bold;">No&nbsp;Old&nbsp;backup&nbsp;folders&nbsp;$OLDBACKDIR&nbsp;&nbsp;!</span><span style="color: #000000; font-weight: bold;">"</span><span style="color: #000000;">&nbsp;</span><span style="color: #000000;">&gt;&gt;</span><span style="color: #000000;">&nbsp;</span><span style="color: #800080;">$LOGFILE</span><span style="color: #000000;"><br />fi<br /><br />echo&nbsp;</span><span style="color: #000000; font-weight: bold;">"</span><span style="color: #000000; font-weight: bold;">Shenti&nbsp;Backup&nbsp;finished&nbsp;at&nbsp;</span><span style="color: #000000; font-weight: bold;">"</span><span style="color: #000000;">$(date&nbsp;</span><span style="color: #000000;">+</span><span style="color: #000000; font-weight: bold;">"</span><span style="color: #000000; font-weight: bold;">%Y-%m-%d&nbsp;%H:%M:%S</span><span style="color: #000000; font-weight: bold;">"</span><span style="color: #000000;">)&nbsp;</span><span style="color: #000000;">&gt;&gt;</span><span style="color: #000000;">&nbsp;</span><span style="color: #800080;">$LOGFILE</span><span style="color: #000000;"><br /><br />cd&nbsp;</span><span style="color: #800080;">$BACKDIR</span><span style="color: #000000;"><br /></span></div><p>&nbsp;</p>3、双机数据自动备份<br />&nbsp;&nbsp; &nbsp;从安全性上考虑来讲，将备份文件存放在宿主机器上本事是不安全的，真的在灾难性情况下，这种备份时很脆弱的，所以我们需要将数据备份到另外的一台服务器上。但是，我们这里实现的双机定时的备份，而不是实时的备份。因为实时备份（热备）对于技术的要求很高，属于商业应用级的。<br />&nbsp;&nbsp; &nbsp;<br />&nbsp;&nbsp; &nbsp;双机备份，我们可以现在本机上备份文件，在将备份的文件传输到其他机器上。但是这个方法并不好，实际中也不会这么去做。<br />&nbsp;&nbsp; &nbsp;查看一些资料，有的说可以通过 Mirror 来实现双机的备份[1]，但是这个还需要借助第三方的软件，我觉得并是很好的办法，因为 linux 中同时还有一个强大的工具 scp 。<br />&nbsp;&nbsp; &nbsp;同时，我们也可以考虑使用 rsync 来同步两个服务器之间的数据，关于 rsync 的使用，在本博中曾经有过一篇做了介绍，这里就不再多说了，希望大家能够找到适合自己的数据备份方案。<br /><br />参考资料：<br />1、<a target="_blank" href="http://www.yesky.com/105/197105.shtml">Linux下数据的备份方法</a>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; <br />2、<a target="_blank" href="http://linux.chinaunix.net/techdoc/database/2006/12/30/947078.shtml">一个Mysql自动备份脚本</a>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <br />3、<a target="_blank" href="http://bkeep.blog.163.com/blog/static/1234142902009715589869/">验证命令是否成功执行</a>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; <br />4、<a target="_blank" href="http://blog.sina.com.cn/s/blog_4e424e2101000c1x.html">Mysql备份和恢复策略</a>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; <br />5、<a target="_blank" href="http://rainbird.blog.51cto.com/211214/41153">tar在脚本中使用的错误信息</a>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; <br />6、<a target="_blank" href="http://www.linuxsir.org/main/node/209">计划任务CRON的配置和说明</a>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; </div><div id="MySignature"></div>
<div class="clear"></div>
<div id="blog_post_info_block">
<div id="BlogPostCategory"></div>
<div id="EntryTag"></div>
<div id="blog_post_info">
</div>
<div class="clear"></div>
<div id="post_next_prev"></div>
</div>


		</div>
		<div class = "postDesc">posted @ <span id="post-date">2009-10-29 15:50</span> <a href='https://www.cnblogs.com/cocowool/'>Cocowool</a> 阅读(<span id="post_view_count">...</span>) 评论(<span id="post_comment_count">...</span>)  <a href ="https://i.cnblogs.com/EditPosts.aspx?postid=1592355" rel="nofollow">编辑</a> <a href="#" onclick="AddToWz(1592355);return false;">收藏</a></div>
	</div>
	<script type="text/javascript">var allowComments=true,cb_blogId=43046,cb_entryId=1592355,cb_blogApp=currentBlogApp,cb_blogUserGuid='6151420b-63cf-dd11-9e4d-001cf0cd104b',cb_entryCreatedDate='2009/10/29 15:50:00';loadViewCount(cb_entryId);var cb_postType=1;</script>
	
</div><!--end: topics 文章、评论容器-->
</div><a name="!comments"></a><div id="blog-comments-placeholder"></div><script type="text/javascript">var commentManager = new blogCommentManager();commentManager.renderComments(0);</script>
<div id='comment_form' class='commentform'>
<a name='commentform'></a>
<div id='divCommentShow'></div>
<div id='comment_nav'><span id='span_refresh_tips'></span><a href='javascript:void(0);' onclick='return RefreshCommentList();' id='lnk_RefreshComments' runat='server' clientidmode='Static'>刷新评论</a><a href='#' onclick='return RefreshPage();'>刷新页面</a><a href='#top'>返回顶部</a></div>
<div id='comment_form_container'></div>
<div class='ad_text_commentbox' id='ad_text_under_commentbox'></div>
<div id='ad_t2'></div>
<div id='opt_under_post'></div>
<div id='cnblogs_c1' class='c_ad_block'></div>
<div id='under_post_news'></div>
<script async='async' src='https://www.googletagservices.com/tag/js/gpt.js'></script>
<script>
  var googletag = googletag || {};
  googletag.cmd = googletag.cmd || [];
</script>

<script>
  googletag.cmd.push(function() {
    googletag.defineSlot('/1090369/C2', [468, 60], 'div-gpt-ad-1539008685004-0').addService(googletag.pubads());
    googletag.pubads().enableSingleRequest();
    googletag.enableServices();
  });
</script>
<div id='cnblogs_c2' class='c_ad_block'>
    <div id='div-gpt-ad-1539008685004-0' style='height:60px; width:468px;'>
    <script>
    if (new Date() >= new Date(2018, 9, 13)) {
        googletag.cmd.push(function() { googletag.display('div-gpt-ad-1539008685004-0'); });
    }
    </script>
    </div>
</div>
<div id='under_post_kb'></div>
<div id='HistoryToday' class='c_ad_block'></div>
<script type='text/javascript'>
    fixPostBody();
    setTimeout(function () { incrementViewCount(cb_entryId); }, 50);
    deliverAdT2();
    deliverAdC1();
    deliverAdC2();    
    loadNewsAndKb();
    loadBlogSignature();
    LoadPostInfoBlock(cb_blogId, cb_entryId, cb_blogApp, cb_blogUserGuid);
    GetPrevNextPost(cb_entryId, cb_blogId, cb_entryCreatedDate, cb_postType);
    loadOptUnderPost();
    GetHistoryToday(cb_blogId, cb_blogApp, cb_entryCreatedDate);   
</script>
</div>


	</div><!--end: forFlow -->
	</div><!--end: mainContent 主体内容容器-->

	<div id="sideBar">
		<div id="sideBarMain">
			
<!--done-->
<div class="newsItem">
<h3 class="catListTitle">公告</h3>
	<div id="blog-news"></div><script type="text/javascript">loadBlogNews();</script>
</div>

			<div id="blog-calendar" style="display:none"></div><script type="text/javascript">loadBlogDefaultCalendar();</script>
			
			<div id="leftcontentcontainer">
				<div id="blog-sidecolumn"></div><script type="text/javascript">loadBlogSideColumn();</script>
			</div>
			
		</div><!--end: sideBarMain -->
	</div><!--end: sideBar 侧边栏容器 -->
	<div class="clear"></div>
	</div><!--end: main -->
	<div class="clear"></div>
	<div id="footer">
		
<!--done-->
Copyright &copy;2018 Cocowool
	</div><!--end: footer -->
</div><!--end: home 自定义的最大容器 -->
<!--PageEndHtml Block Begin-->
<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?433c388afd6e0af1d67cfe808874c659";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>
<!--PageEndHtml Block End-->
</body>
</html>
